<html>
    <head>
        <title> TOTP Brute Force Calculator </title>
    </head>

    <body>
        <div class="container">
            <h1> TOTP Brute Force Calculator </h1>
                <p>Supposing I want to brute force a numeric code?</p>
                <p>I can guess <input class="totp" id="guesses" value="1"/> codes per <select class="totp" id="period"><option value="1">second</option><option value="60">minute</option><option value="3600">hour</option></select></p>
                <p>At any given time <input class="totp" id="grace" value="3"> codes are valid.</p>
                <p>Codes have <input class="totp" id="digits" value="6"> digits in them.</p>
                <p>I want to know how long before I'm logged in with a <input class="totp" id="prob" value="50"> percent probability.</p>
                <p><span class="result"><strong>It'll take about: </strong><span class="totp" id="result"></span></span></p>
                <p>Don't be fooled: the "changing code" in TOTP doesn't provide brute force protection.</p>
        </div>

        <script>
            // https://github.com/thisancog/statistics.js/blob/master/LICENSE
            var _Mathsign=Math.sign,_MathPI=Math.PI,_NumberisInteger=Number.isInteger,_Mathabs=Math.abs,_Mathexp=Math.exp,_Mathlog=Math.log,_Mathsqrt=Math.sqrt,_Mathpow=Math.pow,_Mathround=Math.round,_Mathfloor=Math.floor,Statistics=function(t,e,i={}){this.data=void 0,this.columns=void 0,this.valueMaps=void 0,this.storedResults=void 0,this.lastUpdated=void 0,this.validScales=["nominal","ordinal","interval","metric"],this.zTable=void 0,this.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,0x46e7261f127a0000],this.defaultOptions={epsilon:1e-5,excludeColumns:["ID","id"],incompleteBetaIterations:40,incompleteGammaIterations:80,maxBarnardsN:200,spougeConstant:40,suppressWarnings:!1,zTableIterations:25},this.init=function(t,e,i={}){for(var s in void 0===t&&this.errorMessage("No data was supplied."),this.defaultOptions){var a="object"==typeof i&&this.has(i,s)&&this.has(this.defaultOptions,s)?i[s]:this.defaultOptions[s];Object.defineProperty(this,s,{value:a,writable:!1})}return void 0!==t&&this.updateData(t,e),this},this.updateData=function(t,e){this.addData(t),"object"==typeof e&&this.assignValueMap(e),t.constructor===Array&&"object"!=typeof e&&(this.errorMessage("It is strongly encouraged to initalise statistics.js with a variable table that defines the scale of measurement of each variable (e.g. nominal, metric.). All variables will be assumed as nominal and subsequent analyses will likely be flawed."),s.apply(this))},this.addData=function(t){try{let e=typeof t;if("string"!=e&&"object"!=e||null===t)throw"Input variable data is neither an object nor a JSON encoded string. The variable type is "+e+". The data could not be properly imported.";return"string"==e&&(t=JSON.parse(t)),this.data=this.data?this.data.concat(t):t,this.lastUpdated=Date.now(),!0}catch(t){return this.errorMessage(t)}},this.addRow=function(t){if(void 0===t)return this.errorMessage("Add Row: No data was given.");let e=void 0===this.data?[]:this.data;return e.push(t),this.data=e,this.lastUpdated=Date.now(),!0},this.removeRow=function(t,e=!1){if(void 0===t)return this.errorMessage("Remove row: No index was given.");let i=this.data,s=this.has(this.columns,"id")||this.has(this.columns,"ID");if(e&&s){let t=-1,s=0;for(;-1==t&&s<i.length;)(this.has(i[s],"id")&&i[s].id===e||this.has(i[s],"ID")&&i[s].ID===e)&&(t=s);i.splice(s,1)}else{if(e&&!s&&this.errorMessage('Remove row: There is no column "id" or "ID". The index '+t+" will be treated as the number of the row, starting at 0."),t>i.length-1)return this.errorMessage("Remove row: The stored data has only "+i.length+" rows and index "+t+" is too large. Indexes start at 0.");i.splice(t,1)}return this.data=i,this.lastUpdated=Date.now(),!0},this.reset=function(){try{return this.data=void 0,this.storedResults=void 0,this.lastUpdated=Date.now(),!0}catch(t){this.errorMessage(t.message)}},this.assignValueMap=function(t){let e={},i={};for(var s in t){if(!this.has(t,s)||-1<this.excludeColumns.indexOf(s))continue;let a,r=t[s],n=r;if("object"==typeof r&&this.has(r,"scale")&&(this.has(r,"valueMap")&&(a=r.valueMap),n=r.scale),void 0===a&&("nominal"===n||"ordinal"===n)&&(a=this.getUniqueValues(this.data.map((t=>t[s])))),void 0!==a&&(i[s]=a),-1<this.validScales.indexOf(n))e[s]=n;else{e[s]="nominal";let t='"'+n+'" scale for variable "'+s+'" is invalid. It was assumed as nominal. Valid scales of measurement include: '+this.validScales.join(", ");this.errorMessage(t)}}this.columns=e,this.valueMaps=i,this.sanitizeColumns()};var s=function(){let t={},e=["th","st","nd","rd"];for(var i=0;i<this.data.length;i++)if("object"!=typeof this.data[i]){let t=i%100,s=i+(e[(t-20)%10]||e[t]||e[0]);this.errorMessage("The "+s+" row was ignored because it is not an object.")}else for(var s in Object.keys(this.data[i]))!s in t&&(t[s]="nominal");this.columns=t,this.lastUpdated=Date.now()};this.sanitizeColumns=function(){let t=this.columns,e=this.data;for(var i=0;i<e.length;i++){let a=e[i];for(var s in t){let r=a[s],n=r;switch(t[s]){case"metric":case"interval":n=this.isNumeric(r)?r:NaN;break;case"ordinal":if(void 0!==this.valueMaps){let t=this.valueMaps[s];void 0!==t&&(n=t.indexOf(r))}}e[i][s]=n}}this.data=e,this.lastUpdated=Date.now()},this.setScale=function(t,e){return void 0===e?(this.errorMessage("This method needs to be called with valid values for both the variable and the scale of measurement to set."),!1):this.has(this.columns,t)?-1===this.validScales.indexOf(e)?(this.errorMessage('"'+e+'" is not a valid scale of measurement. Valid scales include: '+this.validScales.join(", ")),!1):(this.columns[t]=e,!0):(this.errorMessage('There is no variable "'+t+'" defined.'),!1)},this.getScale=function(t){if(void 0!==t&&this.has(this.columns,t))return this.columns[t]},this.getValueMap=function(t){if(void 0!==t&&this.has(this.columns,t))return this.valueMaps[t]},this.applyValueMap=function(t,e){let i=this.getValueMap(t);if("ordinal"===this.getScale(t)&&void 0!==i)return"undefined"===e&&(e=this.getColumn(t)),e.map((t=>i[t]))},this.checkLastUpdated=function(t,e){return""!==t&&this.has(this.columns,t)&&void 0!==t&&void 0!==e&&(void 0===this.storedResults||void 0===this.storedResults[t]||void 0===this.storedResults[t][e]||void 0===this.storedResults[t][e].lastUpdated||this.storedResults[t][e].lastUpdated<this.lastUpdated)},this.updateStatistics=function(t,e,i){if(void 0!==t&&void 0!==e&&void 0!==i){var s={value:i,lastUpdated:Date.now()};void 0===this.storedResults?this.storedResults={column:{parameter:s}}:void 0===this.storedResults[t]?this.storedResults[t]={parameter:s}:this.storedResults[t][e]=s}},this.getStatistics=function(t,e){return void 0!==t&&void 0!==e&&this.has(this.columns,t)&&void 0!==this.storedResults[t][e].value?this.storedResults[t][e].value:void 0},this.getColumn=function(t){return void 0===t?this.errorMessage("Get column: No column to sort was specified."):this.has(this.columns,t)?this.data.map((e=>e[t])):this.errorMessage('Get column: The column "'+t+'" was not found.')},this.sortColumn=function(t,e="asc"){return void 0===t?this.errorMessage("Sort column: No column to sort was specified."):this.has(this.columns,t)?this.sort(this.getColumn(t),e):this.errorMessage('Sort column: The column "'+t+'" was not found.')},this.sortDataByColumn=function(t,{data:e=this.data,order:i="asc",changeOriginal:s=!1}={}){return e!==this.data||void 0!==t&&this.has(this.columns,t)?e===this.data||this.has(e[0],t)?(a=t,r=s?e:this.deepCopy(e),n=i,o=this,r.sort((function(t,e){return o.isNumeric(t[a])&&o.isNumeric(e[a])?("asc"===n?1:-1)*(t[a]-e[a]):0}))):this.errorMessage('Sort data by column: The column "'+t+'" does not exist.'):this.errorMessage("Sort data by column: No column was specified or this column does not exist.");var a,r,n,o},this.sort=function(t,e="asc"){return void 0===t?this.errorMessage("Sort: No values given."):t.constructor!==Array||0===t.length?this.errorMessage("Sort: No array or an empty array of values was given."):(i=this.deepCopy(t),s=this,a=e,i.sort(((t,e)=>s.isNumeric(t)&&s.isNumeric(e)?("asc"===a?1:-1)*(t-e):0)));var i,s,a},this.getUniqueValues=function(t){if(void 0===t)return this.errorMessage("Get unique values: No values given.");let e=this.validateInput(t,"nominal","get unique values");return!1===e?void 0:this.sort(e.data.filter(((t,i)=>e.data.indexOf(t)===i)))},this.reduceToPairs=function(t,e){if(void 0===e||void 0===t)return this.errorMessage("This method requires two variables to be compared.");let i=this.validateInput(t,"nominal");if(!1!==i){let a=this.validateInput(e,"nominal");if(!1!==a){let r=i.length>=a.length?i.length:a.length,n=[],o=[],u=[],l="string"==typeof t?t:"first",h="string"==typeof e?e:"second";for(var s=0;s<r;s++){let t=i.data[s],e=a.data[s];if(void 0!==typeof t&&void 0!==typeof e&&!isNaN(t)&&!isNaN(e)){n.push(t),o.push(e);let i={};i[l]=t,i[h]=e,u.push(i)}}return{length:n.length,missings:r-n.length,valuesFirst:n,valuesSecond:o,valuesCombined:u}}}},this.validateInput=function(t,e="metric",i=""){let s={};if("string"!=typeof t&&(t.constructor!==Array||t.constructor===Array&&0==t.length))return this.errorMessage("No properly formatted data was supplied. Specify a column by its name (string) or supply an array of values."),!1;if("string"==typeof t&&""!==t)s.data=this.getColumn(t),s.scale=this.getScale(t),s.length=s.data.length;else{if(!(t.constructor===Array&&0<t.length))return!1;if(!1===this.validateData(t,e))return!1;s.data=t,s.scale=e,s.length=s.data.length}if(0==s.length)return this.errorMessage("The supplied data or the data of the supplied column contains no values."),!1;if(!a.apply(this,[s.scale,e])){let t=this.validScales.slice(this.validScales.indexOf(e)).join(", "),a=""===i?"This statistical method":i.charAt(0).toUpperCase()+i.slice(1);return a+=" is only defined for these scales of measurement: "+t+". The scale of the supplied data is "+s.scale+".",this.errorMessage(a),!1}return s},this.validateData=function(e,i="metric"){if(void 0===e||t.constructor!==Array)return this.errorMessage("Validate data: Specify an array storing the values to be validated.");if("nominal"===i)return!0;for(var s=0;s<e.length;s++)if(!this.isNumeric(e[s]))return this.errorMessage("Validate data: The supplied data contains non-numeric values: "+e[s]+" at index "+s),!1;return!0},this.isNumeric=function(t){return void 0===t?void 0:!Array.isArray(t)&&!isNaN(parseFloat(t))&&isFinite(t)};var a=function(t,e){return this.validScales.indexOf(t)>=this.validScales.indexOf(e)};return this.errorMessage=function(t){if(!this.suppressWarnings)try{throw new TypeError("string"==typeof t?t:t.message)}catch(t){console.error("statistics.js: "+t.message)}},this.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},this.deepCopy=function(t){let e=Array.isArray(t)?[]:{};for(let i in t){let s=t[i];e[i]="object"==typeof s?this.deepCopy(s):s}return e},Statistics.prototype.assignRanks=function(t,{data:e=this.data,order:i="asc",handleTiedValues:s="mean",returnFrequencies:a=!1}={}){if(void 0===t)return this.errorMessage("Assign ranks: You need to specify a column to be ranked.");let r=this.deepCopy(this.sortDataByColumn(t,{data:e,order:i,changeOriginal:!1})),n={};for(var o=0;o<r.length;o++){let e=r[o][t];n[e]=n[e]?n[e]+1:1}let u=0,l=[];for(o=0;o<r.length;o++){let e=r[o][t],i=o+1;1===n[e]?u=0:"mean"===s?(u++,i=o+n[e]/2-u+1.5):"random"===s&&(0===l.length&&(l=Array.from(Array(n[e]),((t,e)=>e+o+1))),i=l[_Mathfloor(Math.random()*l.length)],l.splice(l.indexOf(i),1)),u==n[e]&&(u=0),r[o]["rank-"+t]=i}return a?{data:r,frequencies:n}:r},Statistics.prototype.contingencyTable=function(t,e){if(void 0===e)return this.errorMessage("A contingency table requires two columns to analyze.");if(!this.has(this.columns,t))return this.errorMessage('There is no variable "'+t+'" defined.');if(!this.has(this.columns,e))return this.errorMessage('There is no variable "'+e+'" defined.');let i=this.getScale(t),s=this.getScale(e);if("nominal"!==i&&"ordinal"!==i||"nominal"!==s&&"ordinal"!==s)return this.errorMessage("Both variables need to be nominal for. They are "+i+" and "+s+".");let a=this.getValueMap(t),r=this.getValueMap(e);if(void 0===a||void 0===r)return this.errorMessage("Contingency table: There are no valid values.");let n={total:{total:0}},o=this.data;for(var u=0;u<o.length;u++){let i=o[u][t],s=o[u][e];void 0===n[i]&&(n[i]={total:0}),n[i][s]=void 0===n[i][s]?1:n[i][s]+1,n.total[i]=void 0===n.total[i]?1:n.total[i]+1,n.total[s]=void 0===n.total[s]?1:n.total[s]+1,n[i].total++,n.total.total++}let l={detailled:n};return 2>=a.length&&2>=r.length&&(l.a=n[a[0]][r[0]]||0,l.b=n[a[0]][r[1]]||0,l.c=n[a[1]][r[0]]||0,l.d=n[a[1]][r[1]]||0),l},this.showData=function(t){if("string"==typeof t&&this.has(this.columns,t))"ordinal"===this.getScale(t)?console.log(this.applyValueMap(t)):console.log(this.getColumn(t));else if(void 0===t){let t=this.valueMaps,s=this.data;if(void 0!==t)for(var e in t)if(this.has(t,e)&&void 0!==t[e]&&"ordinal"===this.getScale(e))for(var i=0;i<s.length;i++)s[i][e]=t[e][s[i][e]];console.table(s)}else console.log(t)},this.scatterPlot=function(t=this.data,{canvas:e=null,xAxis:i=null,yAxis:s=null,width:a=null,height:r=null,dotRadius:n=4,showGrid:o=!1,minNumberXMarks:u=8,minNumberYMarks:l=8,background:h="#FFFFFF",dotColor:d="#000000",gridColor:c="#CCCCCC",axisColor:f="#000000"}={}){if(void 0===t)return this.errorMessage("Scatter plot: No data given.");if(t.constructor!==Array||0===t.length)return this.errorMessage("Scotter plot: Data is not an array or empty.");if(0>=u||0>=l)return this.errorMessage("Scotter plot: The number of line to plot must be larger than 0.");let p=typeof t[0];if(!("object"!=p||i&&s))return this.errorMessage("Scatter plot: The variables for the x and y axes need to be supplied.");let m={},g=1/0,v=-1/0,M=1/0,b=-1/0,y=0;for(var S=0;S<t.length;S++){let e,a,r=[];if("number"==p||t[0].constructor===Array){if(!this.isNumeric(t[S]))continue;e=S,a=t[S]}else if("object"==p){if(!(this.has(t[S],i)&&this.has(t[S],s)&&this.isNumeric(t[S][i])&&this.isNumeric(t[S][s])))continue;e=t[S][i],a=t[S][s]}this.has(m,e)?r=m[e]:y+=1,r.push(a),m[e]=r,e>v&&(v=e),e<g&&(g=e),a>b&&(b=a),a<M&&(M=a)}.1>g/v&&(g=0),.1>M/b&&(M=0),null===e&&(e=document.createElement("canvas"));let w=e.getContext("2d"),_=a?.1*a:.1*(v-g);for(var N in 400>(a=(a?a-2*_:v-g)+2*n)&&(a=400),400>(r=(r?r-2*_:b-M)+2*n)&&(r=400),40>_&&(_=40),e.width=a,e.height=r,w.fillStyle="transparent",w.fillRect(0,0,a,r),w.fillStyle=d,m)for(var T=0;T<m[N].length;T++){let t=(N-g)*(a-n)/(v-g),e=r-(m[N][T]-M)*(r-n)/(b-M)-n;w.fillRect(t,e,n,n)}const x=function(t,e,i,s,a,r=f){t.strokeStyle=r,t.beginPath(),t.moveTo(_Mathfloor(e),_Mathfloor(i)),t.lineTo(_Mathfloor(s),_Mathfloor(a)),t.stroke(),t.strokeStyle=f};let I=document.createElement("canvas"),q=I.getContext("2d"),C=a+2*_-2*n,k=r+2*_-2*n;I.width=C,I.height=k,q.fillStyle=h,q.fillRect(0,0,C,k),q.fillStyle=f,q.font=.2*_+"px Arial",q.textAlign="center",q.textBaseline="middle";let D=_Mathround((v-g)/u),B=1<=D?_Mathpow(10,parseInt(D).toString().length-1):.01;D=_Mathround(D/B)*B;let O=0,F=0,P=0;if(0<D)for(S=0;S<u||O<=v&&F<=a-2*_;S++)O=_Mathround(g/B)*B+S*D,F=.5*_+(O-g)*(a-n)/(v-g),F>C-.5*_||F<.5*_||(x(q,F,k-.4*_,F,k-.6*_),o&&x(q,F,k-.6*_,F,.5*_,c),q.fillText(O,F,k-.2*_));let U=(b-M)/l,V=1<=U?_Mathpow(10,parseInt(U).toString().length-1):.01;if(U=_Mathround(U/V)*V,O=0,0<U)for(S=0;S<l||O<=b&&P<=r-2*_;S++)O=_Mathround(M/V)*V+S*U,P=1.5*_-2*n+r-(O-M)*(r-n)/(b-M),P>k-.5*_||P<.5*_||(x(q,.4*_,P,.6*_,P),o&&x(q,.6*_,P,a+_-2*n,P,c),q.fillText(O,.2*_,P));return x(q,.5*_,k-.5*_,C-_,k-.5*_),x(q,.5*_,k-.5*_,.5*_,.5*_),q.drawImage(e,.5*_-.5*n,1.5*_-1.5*n),w.drawImage(I,0,0,a,r),e},this.init(t,e,i)};"undefined"==typeof exports?window.Statistics=Statistics:("undefined"!=typeof module&&module.exports&&(exports=module.exports=Statistics),exports.Statistics=Statistics),Statistics.prototype.mean=function(t){return void 0===t?void 0:this.arithmeticMean(t)},Statistics.prototype.arithmeticMean=function(t){if(void 0===t)return this.errorMessage("Arithmetic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"mean"))return this.getStatistics(t,"mean");let e=this.validateInput(t,"interval","arithmetic mean");if(!1!==e){let i=this.sumExact(e.data)/e.length;return"string"==typeof t&&this.updateStatistics(t,"mean",i),i}},Statistics.prototype.geometricMean=function(t){if(void 0===t)return this.errorMessage("Geometric mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"geometricMean"))return this.getStatistics(t,"geometricMean");let e=this.validateInput(t,"metric","geometric mean");if(!1===e)return;let i,s=!1;return i=e.data.reduce(((t,e)=>0<e?t*e:(s=!0,t)),1),!s&&0<e.length?i=_Mathpow(i,1/e.length):(this.errorMessage("Geometric mean is not defined because the data contains non-positive values."),i=void 0),"string"==typeof t&&this.updateStatistics(t,"geometricMean",i),i},Statistics.prototype.harmonicMean=function(t){if(void 0===t)return this.errorMessage("Harmonic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"harmonicMean"))return this.getStatistics(t,"harmonicMean");let e=this.validateInput(t,"metric","harmonicMean");if(!1===e)return;let i=!1,s=!1,a=e.data.reduce(((t,e)=>0>e?(s=!0,0):0===e?(i=!0,0):t+1/e),0);return a=i?0:e.length/a,a=s?void 0:a,"string"==typeof t&&this.updateStatistics(t,"harmonicMean",a),a},Statistics.prototype.rootMeanSquare=function(t){if(void 0===t)return this.errorMessage("Root mean square: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"rootMeanSquare"))return this.getStatistics(t,"rootMeanSquare");let e=this.validateInput(t,"interval","root mean square");if(!1!==e){let i=_Mathsqrt(e.data.reduce(((t,e)=>t+e*e),0)/e.length);return"string"==typeof t&&this.updateStatistics(t,"rootMeanSquare",i),i}},Statistics.prototype.cubicMean=function(t){if(void 0===t)return this.errorMessage("Cubic mean: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"cubicMean"))return this.getStatistics(t,"cubicMean");let e=this.validateInput(t,"interval","cubic mean");if(!1===e)return;let i=e.data.reduce(((t,e)=>t+e*e*e),0);return i=0<=i&&0<e.length?_Mathpow(i/e.length,1/3):void 0,"string"==typeof t&&this.updateStatistics(t,"cubicMean",i),i},Statistics.prototype.winsorisedMean=function(t,e=.2){if(void 0===t)return this.errorMessage("Winsorised mean: No data was supplied.");if(0>e||.5<e)return this.errorMessage("winsorisedMean should be called with a percentage value within the range of [0, 0.5].");if(.5===e)return this.median(t);let i=this.validateInput(t,"interval","Winsorised (truncated) mean");if(!1===i)return;let s=_Mathfloor(i.length*e),a=this.sort(i.data).slice(s,i.length-s);return a=Array(s).fill(a[0]).concat(a).concat(Array(s).fill(a[a.length-1])),this.sumExact(a)/i.length},Statistics.prototype.gastwirthCohenMean=function(t,{alpha:e=.25,lambda:i=.25}={}){if(void 0===t)return this.errorMessage("Gastwirth-Cohen mean: No data was supplied.");if(!1===this.validateInput(t,"ordinal","Gastwirth-Cohen Mean"))return;if(!this.isNumeric(e)||0>e||.5<e)return this.errorMessage("Gastwirth-Cohen mean should be called with an alpha value within the range of [0, 0.5].");if(!this.isNumeric(i)||0>i||.5<i)return this.errorMessage("Gastwirth-Cohen mean should be called with a lambda value within the range of [0, 0.5].");let s,a=this.quantile(t,e),r=this.quantile(t,1-e),n=this.median(t);return void 0!==a&&void 0!==r&&void 0!==n&&(s=i*(a+r)+(1-2*i)*n),s},Statistics.prototype.midRange=function(t){if(void 0===t)return this.errorMessage("Mid-range: No data was supplied.");if(!1!==this.validateInput(t,"interval","mid-range")){let e=this.minimum(t),i=this.maximum(t);return void 0!==e&&void 0!==i?.5*(e+i):void 0}},Statistics.prototype.median=function(t){if(void 0===t)return this.errorMessage("Median: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"median"))return this.getStatistics(t,"median");let e=this.quantile(t,.5);return"string"==typeof t&&this.updateStatistics(t,"median",e),e},Statistics.prototype.mode=function(t){if(void 0===t)return this.errorMessage("Mode: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"mode"))return this.getStatistics(t,"mode");let e=this.validateInput(t,"nominal","mode");if(!1===e)return;let i=e.data,s=[],a=[i[0]],r=1;for(var n=1;n<e.length;n++){let t=i[n];s[t]=null==s[t]?1:s[t]+1,s[t]>r?(a=[t],r=s[t]):s[t]===r&&a.push(t)}return 1===a.length&&(a=a[0]),"string"==typeof t&&this.updateStatistics(t,"mode",a),a},Statistics.prototype.minimum=function(t){if(void 0===t)return this.errorMessage("Minimum: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"minimum"))return this.getStatistics(t,"minimum");let e=this.validateInput(t,"ordinal","minimum");if(!1===e)return;let i=1/0,s=e.length;for(;s--;)e.data[s]<i&&(i=e.data[s]);return"string"==typeof t&&this.updateStatistics(t,"minimum",i),i},Statistics.prototype.maximum=function(t){if(void 0===t)return this.errorMessage("Maximum: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"maximum"))return this.getStatistics(t,"maximum");let e=this.validateInput(t,"ordinal","maximum");if(!1===e)return;let i=-1/0,s=e.length;for(;s--;)e.data[s]>i&&(i=e.data[s]);return"string"==typeof t&&this.updateStatistics(t,"maximum",i),i},Statistics.prototype.range=function(t){if(void 0===t)return this.errorMessage("Range: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"range"))return this.getStatistics(t,"range");let e,i;if("string"==typeof t&&"nominal"===this.getScale(t)){if(e=this.validateInput(t,"nominal","range"),!1===e)return;i=this.getUniqueValues(e.data)}else{if(e=this.validateInput(t,"ordinal","range"),!1===e)return;let s=this.sort(e.data);i=s[e.length-1]-s[0]}return"string"==typeof t&&this.updateStatistics(t,"range",i),i},Statistics.prototype.variance=function(t,e=!0){if(void 0===t)return this.errorMessage("Variance: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"variance"))return this.getStatistics(t,"variance");let i=this.validateInput(t,"interval","variance");if(!1===i)return;if(2>i.length)return this.errorMessage("The data supplied to compute variance needs to contain at least two datasets.");let s=0;if(this.isNumeric(e)){for(var a=0;a<i.length;a++)s+=_Mathpow(e-i.data[a],2);s/=i.length-1}else{let t=0,r=0;for(a=0;a<i.length;a++){t+=1;let e=i.data[a]-r;r+=e/t,s+=e*(i.data[a]-r)}e&&1<t?s/=t-1:!e&&0<t?s/=t:s=void 0}return"string"==typeof t&&this.updateStatistics(t,"variance",s),s},Statistics.prototype.standardDeviation=function(t,e=!0){if(void 0===t)return this.errorMessage("Standard deviation: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"standardDeviation"))return this.getStatistics(t,"standardDeviation");let i=this.validateInput(t,"interval","standard deviation");if(!1!==i){if(2>i.length)return this.errorMessage("The data supplied to compute standardDeviation needs to contain at least two datasets.");let s=_Mathsqrt(this.variance(t,e));return"string"==typeof t&&this.updateStatistics(t,"standardDeviation",s),s}},Statistics.prototype.coefficientOfVariation=function(t,e){if(void 0===t)return this.errorMessage("Coefficient of variation: No data was supplied.");let i=this.validateInput(t,"interval","coefficient of variation");if(!1!==i){let t=this.standardDeviation(i.data),s=void 0===e?this.mean(i.data):e;return void 0!==t&&void 0!==s&&0!==s?t/s:void 0}},Statistics.prototype.indexOfDispersion=function(t,e){if(void 0===t)return this.errorMessage("Index of dispersion: No data was supplied.");let i=this.validateInput(t,"interval","coefficient of variation");if(!1!==i){let t=this.variance(i.data),s=void 0===e?this.mean(i.data):e;return void 0!==t&&void 0!==s&&0!==s?t/s:void 0}},Statistics.prototype.geometricStandardDeviation=function(t){if(void 0===t)return this.errorMessage("Geomtric standard deviation: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"geometricStandardDeviation"))return this.getStatistics(t,"geometricStandardDeviation");let e=this.validateInput(t,"interval","geometric standard deviation");if(!1===e)return;let i=e.length,s=this.geometricMean(t),a=0,r=!1;for(var n=0;n<i;n++)0>=e.data[n]?r=!0:a+=_Mathpow(_Mathlog(e.data[n]/s),2);return a=r?void 0:_Mathexp(_Mathsqrt(a/i)),"string"==typeof t&&this.updateStatistics(t,"geometricStandardDeviation",a),a},Statistics.prototype.medianAbsoluteDeviation=function(t){if(void 0===t)return this.errorMessage("Median absolute deviation: No data was supplied.");let e=this.validateInput(t,"interval","median absolute deviation");if(!1===e)return;let i=e.data,s=this.median(i);return void 0!==s?(i=i.map((t=>_Mathabs(t-s))),this.median(i)):void 0},Statistics.prototype.cumulativeFrequency=function(t,e){if(void 0===t)return this.errorMessage("Cumulative frequency: No data was supplied.");if(void 0===e||!this.isNumeric(e))return void this.errorMessage("You need to specify a boundary for the cumulative frequency analysis that is either an integer or a floating point number.");let i=this.validateInput(t,"ordinal","cumulative frequency analysis");if(!1!==i){let t=this.sort(i.data),s=0;for(;e>=t[s];)s++;return s}},Statistics.prototype.frequencies=function(t){if(void 0===t)return this.errorMessage("Frequencies: No data was supplied.");let e=this.validateInput(t,"nominal","frequencies");if(!1===e)return;let i=e.data,s={},a=[];for(var r=0;r<e.length;r++){let t=i[r];null==s[t]?(a.push(t),s[t]=1):s[t]++}return a=a.sort(((t,e)=>s[e]-s[t])),a=a.map((t=>({value:t,absolute:s[t],relative:s[t]/e.length}))),a},Statistics.prototype.quantile=function(t,e=.5){if(void 0===t)return this.errorMessage("Quantile: No data was supplied.");if(!this.isNumeric(e)||0>e||1<e)return this.errorMessage("Quantiles should be called with a percentage value within the range of [0, 1].");let i=this.validateInput(t,"ordinal","quantile");if(!1!==i){let t=e*i.length,s=this.sort(i.data);return 0==t%1?.5*(s[t]+s[t-1]):s[_Mathfloor(t)]}},Statistics.prototype.quartiles=function(t){if(void 0===t)return this.errorMessage("Quartiles: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"quartiles"))return this.getStatistics(t,"quartiles");let e=[this.quantile(t,.25),this.quantile(t,.75)];return void 0!==e[0]&&void 0!==e[1]?(this.updateStatistics(t,"quartiles",e),e):void 0},Statistics.prototype.interQuartileRange=function(t){if(void 0===t)return this.errorMessage("Interquartile range: No data was supplied.");let e=this.validateInput(t,"interval","interquartile range");if(!1!==e){let t=this.quartiles(e.data);return void 0===t?void 0:t[1]-t[0]}},Statistics.prototype.skewness=function(t,e=!1){if(void 0===t)return this.errorMessage("Skewness: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"skewness"))return this.getStatistics(t,"skewness");let i=this.validateInput(t,"ordinal","skewness");if(!1===i)return;if(2>i.length)return;let s=this.mean(t),a=this.standardDeviation(t,!1),r=0;for(var n=0;n<i.length;n++)r+=_Mathpow(i.data[n]-s,3);let o=r/_Mathpow(a,3);return o*=e?i.length/((i.length-1)*(i.length-2)):1/i.length,"string"==typeof t&&this.updateStatistics(t,"skewness",o),o},Statistics.prototype.kurtosis=function(t){if(void 0===t)return this.errorMessage("Kurtosis: No data was supplied.");if("string"==typeof t&&!1===this.checkLastUpdated(t,"kurtosis"))return this.getStatistics(t,"kurtosis");let e=this.validateInput(t,"ordinal","kurtosis");if(!1===e)return;if(2>e.length)return;let i=this.mean(t),s=this.standardDeviation(t),a=0;for(var r=0;r<e.length;r++)a+=_Mathpow(e.data[r]-i,4);let n=a/(e.length*_Mathpow(s,4));return"string"==typeof t&&this.updateStatistics(t,"kurtosis",n),n},Statistics.prototype.excessKurtosis=function(t){if(void 0===t)return this.errorMessage("Excess kurtosis: No data was supplied.");let e=this.kurtosis(t);return void 0===e?void 0:e-3},Statistics.prototype.sum=function(t){return void 0===t?this.errorMessage("Sum: No data given."):("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0==t.length?void 0:t.reduce(((t,e)=>this.isNumeric(e)?t+e:t),0))},Statistics.prototype.sumExact=function(t){if(void 0===t)return this.errorMessage("Sum exact: No data given.");if("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0==t.length)return;let e=0,i=0;for(var s=0;s<t.length;s++){let a=this.isNumeric(t[s])?t[s]:0;a-=i;let r=e+a;i=r-e-a,e=r}return e},Statistics.prototype.product=function(t){return void 0===t?this.errorMessage("Product: No data given."):("string"==typeof t&&this.has(this.columns,t)&&(t=this.getColumn(t)),0===t.length?1:t.reduce(((t,e)=>this.isNumeric(e)?t*e:t),1))},Statistics.prototype.factorial=function(t){return this.isNumeric(t)&&!_NumberisInteger(t)?this.gamma(t):void 0===this.factorials[t]?this.computeFactorial(t):this.factorials[t]},Statistics.prototype.computeFactorial=function(t){if(void 0===t||!this.isNumeric(t)||0>t)return;if(void 0!==this.factorials[t])return this.factorials[t];if(!_NumberisInteger(t))return this.gamma(t);let e=1,i=1;for(;t>i;)i++,e*=i,void 0===this.factorials[i]&&(this.factorials[i]=e);return e},Statistics.prototype.binomialCoefficient=function(t=1,e=1){if(t<e||0>e)return this.errorMessage("The binomial coefficient is only defined for n and k with n ≥ k ≥ 0. N is "+t+" and k is "+e+".");if(!_NumberisInteger(t)||!_NumberisInteger(e))return this.errorMessage("The binomial coefficient is only defined for integers n and k.");let i=[];for(var s=1;s<=e;s++)i.push((t+1-s)/s);return this.product(i)},Statistics.prototype.gamma=function(t,e=!1){return void 0===t||!this.isNumeric(t)||0>t?void 0:_NumberisInteger(t)&&void 0!==this.factorials[t-1]?this.factorials[t-1]:e?this.gammaSpouge(t):this.gammaStirling(t)},Statistics.prototype.gammaSpouge=function(t){if(void 0===t||!this.isNumeric(t)||0>t)return;if(_NumberisInteger(t)&&void 0!==this.factorials[t-1])return this.factorials[t-1];const e=this.spougeConstant;let i=_Mathpow(t+e,t+.5),s=1,a=0,r=_Mathsqrt(2*_MathPI);i*=_Mathexp(-t-e),i/=t;for(var n=1;n<e;n++)t++,a=_Mathpow(e-n,n-.5),a*=_Mathexp(e-n),a/=s,r+=a/t,s*=-n;return r*i},Statistics.prototype.gammaStirling=function(t){if(void 0===t||!this.isNumeric(t)||0>t)return;if(_NumberisInteger(t)&&void 0!==this.factorials[t-1])return this.factorials[t-1];let e=1/(10*t);return e=1/(12*t-e),e=.36787944117144233*(e+t),e=_Mathpow(e,t),e*=_Mathsqrt(6.283185307179586/t),e},Statistics.prototype.incompleteGamma=function(t,e){if(void 0===e)return this.errorMessage("The incomplete lower gamma function is only defined for two numeric variables s and x.");if(!this.isNumeric(t)||!this.isNumeric(e))return this.errorMessage("The incomplete lower gamma function is only defined for numeric variables s and x.");if(0>e)return this.errorMessage("The incomplete lower gamma function is defined for x > 0.");let i=this.incompleteGammaIterations,s=1;for(var a=0;a<i;a++){let r=i-a;s=e+(r-t)/(1+r/s)}return this.gamma(t,!0)-_Mathexp(-e)*_Mathpow(e,t)/s},Statistics.prototype.regularisedGamma=function(t,e){return void 0===e?this.errorMessage("The regularised lower gamma function is only defined for two numeric variables s and x."):this.isNumeric(t)&&this.isNumeric(e)?0>e?this.errorMessage("The regularised lower gamma function is defined for x > 0."):this.incompleteGamma(t,e)/this.gamma(t,!0):this.errorMessage("The regularised lower gamma function is only defined for numeric variables s and x.")},Statistics.prototype.beta=function(t,e){return void 0===e?this.errorMessage("The beta function is only defined for two numeric variables a and b."):this.isNumeric(t)&&this.isNumeric(e)?0>=t||0>=e?this.errorMessage("The beta function is defined for a and b with a > 0 and b > 0."):_NumberisInteger(t)&&_NumberisInteger(e)&&0<t&&0<e?this.factorial(t-1)*this.factorial(e-1)/this.factorial(t+e-1):this.gamma(t,!0)*this.gamma(e,!0)/this.gamma(t+e,!0):this.errorMessage("The beta function is only defined for numeric variables a and b.")},Statistics.prototype.incompleteBeta=function(t,e,i){if(void 0===i)return this.errorMessage("The incomplete beta function is only defined for two numeric variables a and b.");if(!this.isNumeric(t)||!this.isNumeric(e)||!this.isNumeric(i))return this.errorMessage("The incomplete beta function is only defined for numeric variables x, a and b.");if(0>t||1<t)return this.errorMessage("The incomplete beta function is defined for x ≥ 0 and x ≦ 1.");if(0>=e||0>=i)return this.errorMessage("The incomplete beta function is defined for a and b with a > 0 and b > 0.");if(1==t)return this.beta(e,i);var s=function(t,e,i,s){if(0==t%2){let a=.5*t;return a*(i-a)*s/((e+2*a-1)*(e+2*a))}let a=.5*t-.5;return-(e+a)*(e+i+a)*s/((e+2*a)*(e+2*a+1))};let a=_Mathpow(t,e)*_Mathpow(1-t,i)/e,r=this.incompleteBetaIterations,n=1;for(var o=0;o<r;o++){n=1+s(r-o,e,i,t)/n}return a/n},Statistics.prototype.regularisedBeta=function(t,e,i){if(void 0===i)return this.errorMessage("The regularised beta function is only defined for two numeric variables a and b.");if(!this.isNumeric(t)||!this.isNumeric(e)||!this.isNumeric(i))return this.errorMessage("The regularised beta function is only defined for numeric variables x, a and b.");if(1<t||0>t)return this.errorMessage("The regularised beta function is defined for x ≥ 0 and x ≦ 1.");if(0>=e||0>=i)return this.errorMessage("The regularised beta function is defined for a and b with a > 0 and b > 0.");if(!_NumberisInteger(e)||!_NumberisInteger(i))return this.incompleteBeta(t,e,i)/this.beta(e,i);let s=this.epsilon+1,a=e,r=0;for(;s>=this.epsilon;)s=this.binomialCoefficient(i+a-1,a)*_Mathpow(t,a),r+=s,a++;return r*_Mathpow(1-t,i)},Statistics.prototype.covariance=function(t,e,i=!0){if(void 0===e)return this.errorMessage("Covariance requires two variables to be compared.");let s=this.validateInput(t,"interval","covariance");if(!1===s)return;let a=this.validateInput(e,"interval","covariance");if(!1===a)return;let r=this.reduceToPairs(s.data,a.data);if(0===r.length)return;let n=this.mean(r.valuesFirst),o=this.mean(r.valuesSecond),u=0;for(var l=0;l<r.length;l++)u+=(r.valuesFirst[l]-n)*(r.valuesSecond[l]-o);return i&&1<r.length?u/=r.length-1:!i&&0<r.length?u/=r.length:u=void 0,{covariance:u,missings:r.missings}},Statistics.prototype.correlationCoefficient=function(t,e){if(void 0===e)return this.errorMessage("Pearson correlation coefficient requires two variables to be compared.");let i=this.validateInput(t,"interval","Pearson correlation coefficient");if(!1===i)return;let s=this.validateInput(e,"interval","Pearson correlation coefficient");if(!1===s)return;let a=i.length>=s.length?i.length:s.length,r=i.data,n=s.data,o=[],u=0,l=0;for(var h=0;h<a;h++){let t=r[h],e=n[h];void 0===typeof t||void 0===typeof e||isNaN(t)||isNaN(e)||(u+=t,l+=e,o.push([t,e]))}let d=a-o.length;if(a=o.length,0===a)return;u/=a,l/=a;let c=0,f=0,p=0;for(h=0;h<a;h++){let t=o[h][0]-u,e=o[h][1]-l;c+=t*e,f+=t*t,p+=e*e}return{correlationCoefficient:0<f&&0<p?c/_Mathsqrt(f*p):0,missings:d}},Statistics.prototype.spearmansRho=function(t,e,i=!1){if(void 0===e)return this.errorMessage("Spearman's Rho requires two variables to be compared.");if(!1===this.validateInput(t,"ordinal","Spearman's Rho"))return;if(!1===this.validateInput(e,"ordinal","Spearman's Rho"))return;let s=this.reduceToPairs(t,e),a=s.length;if(0===a)return;let r=this.assignRanks(t,{data:s.valuesCombined,returnFrequencies:!0,order:"desc"}),n=r.frequencies;r=this.assignRanks(e,{data:r.data,returnFrequencies:!0,order:"desc"});let o=r.frequencies;r=r.data;let u=6*r.reduce(((i,s)=>i+_Mathpow(s["rank-"+t]-s["rank-"+e],2)),0);if(i){let t=Object.values(n).reduce(((t,e)=>t+_Mathpow(e,3)-e)),e=Object.values(o).reduce(((t,e)=>t+_Mathpow(e,3)-e));u=(_Mathpow(a,3)-a-.5*t-.5*e-u)/_Mathsqrt((_Mathpow(a,3)-a-t)*(_Mathpow(a,3)-a-e))}else u=1-u/(_Mathpow(a,3)-a);let l=a-2,h=_Mathsqrt((l-1)/1.06)*this.fisherTransformation(u),d=1-this.normalCumulativeValue(_Mathabs(h)),c=u*_Mathsqrt(l/(1-u*u)),f=1-this.studentsTCumulativeValue(_Mathabs(c),l);return{rho:u,significanceNormal:{zScore:h,pOneTailed:d,pTwoTailed:2*d},significanceStudent:{degreesOfFreedom:l,tStatistic:c,pOneTailed:f,pTwoTailed:2*f},missings:s.missings}},Statistics.prototype.kendallsTau=function(t,e){if(void 0===e)return this.errorMessage("Kendall's Tau requires two columns to analyze.");if(!1===this.validateInput(t,"ordinal","Kendall's Tau"))return;if(!1===this.validateInput(e,"ordinal","Kendall's Tau"))return;let i=this.reduceToPairs(t,e),s=i.length,a=i.valuesCombined,r=0,n=0,o={},u={},l=0;for(var h=0;h<s-1;h++)for(var d=h+1;d<s;d++){let i=a[h][t],s=a[d][t],c=a[h][e],f=a[d][e];i===s?c===f?l+=1:o[c]=this.has(o,c)?o[c]+1:1:c===f?u[c]=this.has(u,c)?u[c]+1:1:_Mathsign(i-s)===_Mathsign(c-f)?r+=1:n+=1}let c=r-n,f=0===Object.keys(o).length+Object.keys(u).length?2*c/(s*(s-1)):void 0,p=3*c/_Mathsqrt(.5*s*(s-1)*(2*s+5)),m=this.normalCumulativeValue(-_Mathabs(p)),g=2<i.length?2:i.length,v=f,M=p,b=m;if(void 0===f){v=c/_Mathsqrt((r+n+Object.keys(o).length)*(r+n+Object.keys(u).length));let t=0,e=0,i=0,a=0,l=0;for(var y in o)t+=y*(y-1)*(2*y+5),i+=y*(y-1),a+=y*(y-1)*(y-2);for(var y in u)e+=y*(y-1)*(2*y+5),a+=y*(y-1)/(2*s*(s-1)),l+=y*(y-1)*(y-2)/(9*s*(s-1)*(s-2));M=s*(s-1)*(2*s+5),M=(M-t-e)/18+i*a+0*l,M=c/_Mathsqrt(M),b=this.normalCumulativeValue(-_Mathabs(M))}return{a:void 0===f?void 0:{tauA:f,z:p,pOneTailed:m,pTwoTailed:2*m},b:void 0===f?{tauB:v,z:M,pOneTailed:b,pTwoTailed:2*b}:{tauB:f,z:p,pOneTailed:m,pTwoTailed:2*m},c:{tauC:2*g*c/(s*s*(g-1))},missings:i.missings}},Statistics.prototype.goodmanKruskalsGamma=function(t,e){if(void 0===e)return this.errorMessage("Goodman and Kruskal's Gamma requires two columns to analyze.");if(!1===this.validateInput(t,"ordinal","Goodman and Kruskal's Gamma"))return;if(!1===this.validateInput(e,"ordinal","Goodman and Kruskal's Gamma"))return;let i=this.reduceToPairs(t,e),s=i.valuesCombined,a=i.length,r=0,n=0;for(var o=0;o<a-1;o++)for(var u=o+1;u<a;u++){let i=s[o][t],a=s[u][t],l=s[o][e],h=s[u][e];i===a||l===h||(_Mathsign(i-a)===_Mathsign(l-h)?r+=1:n+=1)}let l=(r-n)/(r+n),h=l*_Mathsqrt((r+n)/(a*(1-l*l))),d=1-this.studentsTCumulativeValue(_Mathabs(h),a-2);return{gamma:l,tStatistic:h,pOneTailed:d,pTwoTailed:2*d,missings:i.missings}},Statistics.prototype.fisherTransformation=function(t){return void 0===t||!this.isNumeric(t)||-1>t||1<t?this.errorMessage("Fisher transformation is only defined for a Pearson correlation coefficient within the interval of [-1, 1]."):Math.atanh(t)||.5*_Mathlog((1+t)/(1-t))},Statistics.prototype.linearRegression=function(t,e){if(void 0===e)return this.errorMessage("Linear regression requires two columns to compare.");let i=this.validateInput(t,"interval","linear regression");if(!1===i)return;let s=this.validateInput(e,"interval","linear regression");if(!1===s)return;let a=this.reduceToPairs(i.data,s.data),r=a.valuesFirst,n=a.valuesSecond,o=(a.missings,a.length);if(0===o)return;let u=this.mean(r),l=this.mean(n),h=0,d=0,c=0;for(var f=0;f<o;f++){let t=r[f]-u,e=n[f]-l;c+=t*e,h+=t*t,d+=e*e}if(0==h||0==d)return;let p=c/h,m=c/d,g=c/_Mathsqrt(h*d),v=g*g,M=2<o?1-(1-v)*(o-1)/(o-2):void 0,b=180*Math.acos(g)/_MathPI;return 90<b&&(b=180-b),{regressionFirst:{beta1:l-p*u,beta2:p},regressionSecond:{beta1:u-m*l,beta2:m},coefficientOfDetermination:v,coefficientOfDeterminationCorrected:M,correlationCoefficient:g,phi:b}},Statistics.prototype.normalProbabilityDensity=function(t,e=0,i=1){if(void 0===t)return this.errorMessage("Normal probability density: no x is given.");if(0>=i)return this.errorMessage("Normal probability density: variance must be larger than 0.");let s=-_Mathpow(t-e,2)/(2*i);return _Mathexp(s)/_Mathsqrt(2*_MathPI*i)},Statistics.prototype.normalDistribution=function(t=0,e=1){if(0>=e)return this.errorMessage("Normal distribution: variance must be larger than 0.");let i=0,s=1,a={};for(;s>=this.epsilon&&(s=this.normalProbabilityDensity(t+i,t,e),!(s<this.epsilon));)a[(t+i).toFixed(2)]=s,a[(t-i).toFixed(2)]=s,i+=.01;return a},Statistics.prototype.normalCumulativeValue=function(t){if(void 0===t)return this.errorMessage("Normal cumulative value: no z is given.");let e=t,i=t;for(var s=1;s<this.zTableIterations;s++)i*=t*t/(2*s+1),e+=i;return _Mathround(1e5*(.5+e/_Mathsqrt(2*_MathPI)*_Mathexp(-.5*t*t)))/1e5},Statistics.prototype.normalCumulativeDistribution=function(){let t=this.zTable;if(void 0===t){t={};for(var e=0;4.09>=e;e+=.01){t[(_Mathround(100*e)/100).toFixed(2)]=this.normalCumulativeValue(e)}this.zTable=t}return t},Statistics.prototype.binomialProbabilityMass=function(t,e=10,i=.5){return void 0===t?this.errorMessage("Binomial probability mass: the required argument k was not given."):0>t||!_NumberisInteger(t)?this.errorMessage("Binomial probability mass: k must be a non-negative integer."):0>e||!_NumberisInteger(e)?this.errorMessage("Binomial probability mass: n must be a non-negative integer."):0>i||1<i?this.errorMessage("Binomial probability mass: The probability must lie within the range of [0, 1]."):this.binomialCoefficient(e,t)*_Mathpow(i,t)*_Mathpow(1-i,e-t)},Statistics.prototype.binomialDistribution=function(t=10,e=.5){if(0>t||!_NumberisInteger(t))return this.errorMessage("Binomial distribution: n must be a non-negative integer.");if(0>e||1<e)return this.errorMessage("Binomial distribution: The probability must lie within the range of [0, 1].");let i=0,s=0,a=0,r=[],n=1;for(;i<=t;)s=n*_Mathpow(e,i)*_Mathpow(1-e,t-i),r.push(s),a+=s,i++,n=n*(t+1-i)/i;return r},Statistics.prototype.binomialCumulativeValue=function(t,e=10,i=.5){return void 0===t?this.errorMessage("Binomial cumulative distribution value: the required argument k was not given."):0>t||!_NumberisInteger(t)?this.errorMessage("Binomial cumulative distribution value: k must be a non-negative integer."):0>e||!_NumberisInteger(e)?this.errorMessage("Binomial cumulative distribution value: n must be a non-negative integer."):0>i||1<i?this.errorMessage("Binomial cumulative distribution value: The probability must lie within the range of [0, 1]."):this.regularisedBeta(1-i,e-t,t+1)},Statistics.prototype.binomialCumulativeDistribution=function(t=10,e=.5){if(0>t||!_NumberisInteger(t))return this.errorMessage("Binomial cumulative distribution: n must be a non-negative integer.");if(0>e||1<e)return this.errorMessage("Binomial cumulative distribution: The probability must lie within the range of [0, 1].");let i=this.binomialDistribution(t,e),s=0;return i.map((function(t){return s=this.sumExact([s,t]),s}),this)},Statistics.prototype.poissonProbabilityMass=function(t,e=1){if(void 0===t||!_NumberisInteger(t))return this.errorMessage("Poisson probability mass: the required argument k must be an integer.");if(0>t||0>=e)return this.errorMessage("Poisson probability mass: Both k and lambda must be larger than 0.");if(10<t){let s=1;for(var i=1;i<=t;i++)s*=e*_Mathexp(-e/t)/i;return s}return _Mathexp(-e)*_Mathpow(e,t)/this.factorial(t)},Statistics.prototype.poissonDistribution=function(t=1){if(0>=t)return this.errorMessage("Poisson distribution: Lambda must be larger than 0.");let e=0,i=0,s=[];for(;i<1-this.epsilon;){let a=this.poissonProbabilityMass(e,t);s.push(a),i+=a,e++}return s},Statistics.prototype.poissonCumulativeValue=function(t,e=1){if(void 0===t||!_NumberisInteger(t))return this.errorMessage("Poisson cumulative distribution: The number of cumulative events k must be supplied.");if(0>t||0>=e)return this.errorMessage("Poisson distribution: Both k and lambda must be larger than 0.");let i=this.poissonDistribution(e);return t<i.length-1?this.sumExact(i.slice(0,t+1)):1},Statistics.prototype.poissonCumulativeDistribution=function(t=1){if(0>=t)return this.errorMessage("Poisson distribution: lambda must be larger than 0.");let e=this.poissonDistribution(t),i=0;return e.map((function(t){return i=this.sumExact([i,t]),i}),this)},Statistics.prototype.studentsTProbabilityDensity=function(t,e){if(void 0===e)return this.errorMessage("Student's t-distribution probability density: no value for degrees of freedom (df) given.");if(0>=e)return this.errorMessage("Student's t-distribution probability density: degrees of freedom (df) must be larger than 0.");let i=_Mathpow(1+t*t/e,-.5*(e+1));return i/=_Mathsqrt(e)*this.beta(.5,.5*e),i},Statistics.prototype.studentsTDistribution=function(t){if(void 0===t)return this.errorMessage("Student's t-distribution: no value for degrees of freedom (df) given.");if(0>=t)return this.errorMessage("Student's t-distribution: degrees of freedom (df) must be larger than 0.");let e=0,i=1,s={};for(;i>=this.epsilon&&(i=this.studentsTProbabilityDensity(e,t),!(i<this.epsilon));)s[e.toFixed(2)]=i,s[(-e).toFixed(2)]=i,e+=.01;return s},Statistics.prototype.studentsTCumulativeValue=function(t,e){return void 0===e?this.errorMessage("Student's cumulative t-distribution value: no value for degrees of freedom (df) given."):0>=e?this.errorMessage("Student's cumulative t-distribution value: degrees of freedom (df) must be larger than 0."):0>=t?.5*this.regularisedBeta(e/(t*t+e),.5*e,.5):.5+.5*this.regularisedBeta(t*t/(t*t+e),.5,.5*e)},Statistics.prototype.studentsTCumulativeDistribution=function(t){if(void 0===t)return this.errorMessage("Student's cumulative t-distribution: no value for degrees of freedom (df) given.");if(0>=t)return this.errorMessage("Student's cumulative t-distribution: degrees of freedom (df) must be larger than 0.");let e=0,i=0,s=-.1,a={};for(;i<=1-this.epsilon&&(i=this.studentsTCumulativeValue(e,t),!(s>=i));)a[e.toFixed(2)]=i,a[(-e).toFixed(2)]=i,s=i,e+=.01;return a},Statistics.prototype.chiSquaredProbabilityDensity=function(t,e){return void 0===e?this.errorMessage("Chi squared distribution probability density: no value for degrees of freedom (df) given."):0>=e?this.errorMessage("Chi squared distribution probability density: degrees of freedom (df) must be larger than 0."):0>=t?0:_Mathpow(t,.5*e-1)*_Mathexp(-.5*t)/(_Mathpow(2,.5*e)*this.gamma(.5*e,!0))},Statistics.prototype.chiSquaredDistribution=function(t){if(void 0===t)return this.errorMessage("Chi squared distribution: no value for degrees of freedom (df) given.");if(0>=t)return this.errorMessage("Chi squared distribution: degrees of freedom (df) must be larger than 0.");let e=.01,i=1,s={"0.00":0};for(;(2>=t&&i>=this.epsilon||2<t&&e<=t-2||2<t&&i>=this.epsilon)&&(i=this.chiSquaredProbabilityDensity(e,t),!(i<this.epsilon&&e>=t-2&&2<t));)s[e.toFixed(2)]=i,e+=.01;return s},Statistics.prototype.chiSquaredCumulativeValue=function(t,e){return void 0===e?this.errorMessage("Chi squared cumulative distribution value: no value for degrees of freedom (df) given."):0>=e?this.errorMessage("Chi squared cumulative distribution value: degrees of freedom (df) must be larger than 0."):0>=t?0:this.regularisedGamma(.5*e,.5*t)},Statistics.prototype.chiSquaredCumulativeDistribution=function(t){if(void 0===t)return this.errorMessage("Chi squared cumulative distribution: no value for degrees of freedom (df) given.");if(0>=t)return this.errorMessage("Chi squared cumulative distribution: degrees of freedom (df) must be larger than 0.");let e=.01,i=0,s={"0.00":0};for(;i<=1-this.epsilon&&(i=this.chiSquaredCumulativeValue(e,t),!(i>=1-this.epsilon));)0<i&&(s[e.toFixed(2)]=i),e+=.01;return s},Statistics.prototype.barnardsTest=function(t,e){if(void 0===e)return this.errorMessage("Barnard's test: No data was supplied.");let i=this.contingencyTable(t,e,"Barnard's test");if(void 0===i)return;let{a:s,b:a,c:r,d:n}=i,o=s+a+r+n;if(o>this.maxBarnardsN)return this.errorMessage("Barnard's test is a resource-intensive method, relative to the total number of datasets to analyze. There are "+o+" datasets in the supplied data, exceeding the maxinum of "+this.maxBarnardsN+'. You can change this number by changing the "maxBarnardsN" option (be cautious).');var u=(s+a)/o;u=(a/(a+n)-s/(s+r))/_Mathsqrt(u=u*(1-u)*(1/(s+r)+1/(a+n))),isNaN(u)&&(u=0);let l=[];for(var h=0;1>h;h=this.sumExact([h,.001])){let t=0;for(var d=0;d<=s+r;d++)for(var c=0;c<=a+n;c++){let e=(d+c)/o;if(e=e*(1-e)*(1/(s+r)+1/(a+n)),e=(d/(s+r)-c/(a+n))/_Mathsqrt(e),!isNaN(e)&&_Mathabs(e)>=_Mathabs(u)){let e=this.binomialCoefficient(s+r,d)*this.binomialCoefficient(a+n,c);e*=_Mathpow(h,d+c)*_Mathpow(1-h,o-d-c),t+=isNaN(e)?0:e}}l.push({nuisance:h,significance:t})}return l=this.sortDataByColumn("significance",{data:l,order:"desc"}),{wald:u,nuisance:l[0].nuisance,pOneTailed:.5*l[0].significance,pTwoTailed:l[0].significance}},Statistics.prototype.binomialTest=function(t,e,i=.5){if(void 0===e)return this.errorMessage("Binomial test requires the data to test and a value which is hypotethised to be observed with a probability of alpha.");if(0>i||1<i)return this.errorMessage("Binomial test is only defined for probabilities alpha with alpha ≥ 0 and alpha ≦ 1.");let s=this.getScale(t);if("interval"===s||"metric"===s)return this.errorMessage("Binomial test is only defined for data of nominal or ordinal dichotomic scale.");let a=this.validateInput(t,"nominal","binomial test");if(!1!==a){let t=this.getUniqueValues(a.data);if(2<t.length)return this.errorMessage("Binomial test is only defined for dichotomic data. The supplied data has "+t.length+" unique values.");if(2===t.length&&0>t.indexOf(e))return this.errorMessage('The value "'+e+'" was not found in the supplied data.');let s=a.data.filter((function(t){return t===e})).length,r=this.binomialProbabilityMass(s,a.length,i),n=this.binomialCumulativeValue(s-1,a.length,i),o=1-n-r;return{pExactly:r,pFewer:n,pAtMost:n+r,pMore:o,pAtLeast:o+r}}},Statistics.prototype.signTest=function(t,e){if(void 0===e)return this.errorMessage("Sign test: No data was supplied.");let i=this.validateInput(t,"ordinal","sign test"),s=this.validateInput(e,"ordinal","sign test");if(!1===i||!1===s)return;if(0===i.length||0===s.length)return;let a=this.reduceToPairs(i.data,s.data),r=(a.missings,a.length),n=a.valuesFirst,o=a.valuesSecond,u=0;for(var l=0;l<r;l++)n[l]>o[l]&&(u+=1);let h=this.binomialProbabilityMass(u,r),d=this.binomialCumulativeValue(u-1,r),c=1-d-h;return{positives:u,pExactly:h,pFewer:d,pAtMost:d+h,pMore:c,pAtLeast:c+h}},Statistics.prototype.fishersExactTest=function(t,e){if(void 0===e)return this.errorMessage("Fisher's exact test requires two columns to analyze.");let i=this.contingencyTable(t,e,"Fisher's exact test");if(void 0!==i){let{a:t,b:e,c:s,d:a}=i;return this.binomialCoefficient(t+e,t)*this.binomialCoefficient(s+a,s)/this.binomialCoefficient(t+e+s+a,t+s)}},Statistics.prototype.mannWhitneyU=function(t,e){if(void 0===e)return this.errorMessage("Mann-Whitney-U test requires two columns to analyze.");let i=this.validateInput(t,"nominal","Mann-Whitney-U test"),s=this.validateInput(e,"ordinal","Mann-Whitney-U test");if(!1===i||!1===s)return;if(0===i.length||0===s.length)return;this.sort(s.data);let a=this.getUniqueValues(i.data);if(2!==a.length)return this.errorMessage('The Mann-Whitney-U test requires the independent variable to have exactly two unique values. Variable "'+independentValue+'" has '+a.length+" different values: "+i.data.join(", "));let r=this.assignRanks(e),n=r.reduce(((i,s)=>s[t]===a[0]?i+s["rank-"+e]:i),0),o=r.reduce(((e,i)=>i[t]===a[0]?e+1:e),0),u=r.reduce(((i,s)=>s[t]===a[1]?i+s["rank-"+e]:i),0),l=r.reduce(((e,i)=>i[t]===a[1]?e+1:e),0),h=Math.min(o*(.5*o+l+.5)-n,l*(.5*l+o+.5)-u),d=(h-.5*o*l)/_Mathsqrt(o*l*(o+l+1)/12),c=1-this.normalCumulativeValue(_Mathabs(d));return{MannWhitneyU:h,zScore:d,pOneTailed:c,pTwoTailed:2*c}},Statistics.prototype.chiSquaredTest=function(t,e){if(void 0===e)return this.errorMessage("Chi Squared Test: You need to specify two variables, either of nominal or ordinal scale.");let i=this.getScale(t),s=this.getScale(e);if("ordinal"!==i&&"nominal"!==i||"ordinal"!==s&&"nominal"!==s)return this.errorMessage("Chi Squared Test: Both variables need to be either of nominal or ordinal scale.");let a=this.contingencyTable(t,e);if(void 0===a)return this.errorMessage("Chi Squared Test: Failed to create a contingency table. Please make sure your data is prepared correctly.");a=a.detailled;let r,n=a.total.total,o=0,u=Object.keys(a).length-1;for(var l in u=(u-1)*(Object.keys(a.total).length-u-2),a)if(this.has(a,l)&&"total"!=l){let t=a[l].total;for(var h in a[l])if(this.has(a[l],h)&&"total"!=h){let e=t*a.total[h]/n;o+=_Mathpow(a[l][h]-e,2)/e}}return r=0>o||1>u?0:1-this.chiSquaredCumulativeValue(o,u),{PearsonChiSquared:o,degreesOfFreedom:u,significance:r}},Statistics.prototype.studentsTTestOneSample=function(t,e){if(void 0===e||!this.isNumeric(e))return this.errorMessage("Student's t-test (one sample) requires data and the mean for which the null hypothesis should hold true.");let i=this.validateInput(t,"interval","student's t-test (one sample)");if(!1===i)return;if(0===i.length)return;let s=this.mean(i.data),a=this.standardDeviation(i.data),r=_Mathsqrt(i.length)*(s-e)/a,n=i.length-1,o=this.studentsTCumulativeValue(_Mathabs(r),n);return.5<o&&(o=1-o),{tStatistic:r,degreesOfFreedom:n,pOneSided:o,pTwoSided:2*o}},Statistics.prototype.studentsTTestTwoSamples=function(t,e,{nullHypothesisDifference:i=0,dependent:s=!1}={}){if(void 0===e)return this.errorMessage("Student's t-test (two sample) requires data for two columns and the difference of their means for which the null hypothesis should hold true.");let a=this.validateInput(t,"interval","student's t-test (two sample)"),r=this.validateInput(e,"interval","student's t-test (two sample)");if(!1===a||!1===r)return;let n,o,u=a.length,l=r.length,h={};if(0===u||0===l)return;if(s){let t=this.reduceToPairs(a.data,r.data),e=t.valuesFirst,s=t.valuesSecond,l=0,c=0;for(var d=0;d<t.length;d++)c+=e[d]-s[d];c/=t.length;for(d=0;d<t.length;d++)l+=_Mathpow(e[d]-s[d]-c,2);l=_Mathsqrt(l/(t.length-1)),n=_Mathsqrt(u)*(c-i)/l,o=t.length-1,h={tStatistic:n,degreesOfFreedom:o,missings:t.missings}}else{let t=this.mean(a.data),e=this.mean(r.data),s=this.variance(a.data),d=this.variance(r.data);n=(t-e-i)/_Mathsqrt(((u-1)*s+(l-1)*d)/(u+l-2)),n*=_Mathsqrt(u*l/(u+l)),o=u+l-2,h={tStatistic:n,degreesOfFreedom:o}}let c=this.studentsTCumulativeValue(n,o);return.5<c&&(c=1-c),h.pOneSided=c,h.pTwoSided=2*c,h},Statistics.prototype.gaussianError=function(t){if(void 0===t||!this.isNumeric(t))return this.errorMessage("Gaussian Error Function: No valid value for x supplied. X needs to be numeric.");let e=1/(1+.5*_Mathabs(t)),i=-t*t-1.26551223+1.00002368*e+.37409196*e*e+.09678418*_Mathpow(e,3)-.18628806*_Mathpow(e,4)+.27886807*_Mathpow(e,5)-1.13520398*_Mathpow(e,6)+1.48851587*_Mathpow(e,7)-.82215223*_Mathpow(e,8)+.17087277*_Mathpow(e,9);return i=_Mathexp(i)*e,0<=t?1-i:i-1},Statistics.prototype.inverseGaussianError=function(t){if(void 0===t||!this.isNumeric(t))return this.errorMessage("Inverse Gaussian Error Function: No valid value for x supplied. X needs to be numeric.");if(1<t)return this.errorMessage("Inverse Gaussian Error Function: x can not be larger than 1.");if(-1>t)return this.errorMessage("Inverse Gaussian Error Function: x can not be smaller than -1.");var e,i=-_Mathlog((1-t)*(1+t));return 5>i?e=1.50140941+(e=.246640727+(e=(e=(e=.00021858087+(e=(e=(e=3.43273939e-7+2.81022636e-8*(i-=2.5))*i-35233877e-13)*i-439150654e-14)*i)*i-.00125372503)*i-.00417768164)*i)*i:e=2.83297682+(e=1.00167406+(e=.00943887047+(e=(e=.00573950773+(e=(e=.00134934322+(e=.000100950558-.000200214257*(i=_Mathsqrt(i)-3))*i)*i-.00367342844)*i)*i-.0076224613)*i)*i)*i,(e*t).toFixed(7)},Statistics.prototype.probit=function(t){return void 0!==t&&this.isNumeric(t)?0>t||1<t?this.errorMessage("Probit is only defined for quantiles p with 1 ≥ p ≥ 0."):0===t?-1/0:1===t?1/0:1.4142135623730951*this.inverseGaussianError(2*t-1):this.errorMessage("Probit: No valid value for quantile supplied. quantile needs to be numeric.")},Statistics.prototype.fisherYatesShuffle=function(t,e=Math.random){if(void 0===t)return this.errorMessage("Fisher-Yates shuffle: No data given.");let i=this.validateInput(t,"nominal","");if(!1===i)return;let s,a,r=i.data,n=i.length;for(;n;)a=_Mathfloor(e()*n--),s=r[n],r[n]=r[a],r[a]=s;return r},Statistics.prototype.xorshift=function(t,e=0){if(void 0===t||t.constructor!==Array||4!==t.length)return this.errorMessage("Xorshift needs to be seeded with an array consisting of four numbers.");if(!_NumberisInteger(e)||0>e)return this.errorMessage("Xorshift: startIndex must be a non-negative integer.");let i=0,s=4,a=new Uint32Array(64);a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3];const r=function(t,e,i){for(var s=e;s<i;s++){let e=(t[0]^t[0]<<11)>>>0;t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=((t[3]^t[3]>>>19)>>>0^(e^e>>>8)>>>0)>>>0,t[s]=t[3]}return t};this.next=function(t=!0){let e=a[s];return i+=1,s++>=64&&(s=4,r(a,4,64)),t?e/4294967296:e},a=r(a,4,64);for(var n=0;n<e;n++)this.next()},Statistics.prototype.boxMuller=function(t=0,e=1,{randomSourceA:i=Math.random,randomSourceB:s=Math.random}={}){let a=0,r=0,n=0,o=0;do{a=i(),n+=1}while((0>=a||1<=a)&&50>n);do{r=s(),o+=1}while((0>=r||1<=r)&&50>o);for(;0>=a||1<=a;)a=Math.random();for(;0>=r||1<=r;)r=Math.random();return _Mathsqrt(-2*_Mathlog(a))*Math.cos(2*_MathPI*r)*e+t},Statistics.prototype.ziggurat=function(t=0,e=1){let i=123456789,s=[128],a=[128],r=[128];const n=function(){let t=i,e=i;return e^=e<<13,e^=e>>>17,e^=e<<5,i=e,0|t+e},o=function(){return.5*(1+n()/-2147483648)};(function(){i^=(new Date).getTime();let t=2147483648,e=3.442619855899,n=e,o=.00991256303526217,u=o/_Mathexp(-.5*e*e);r[0]=_Mathfloor(e*t/u),r[1]=0,s[0]=u/t,s[127]=e/t,a[0]=1,a[127]=_Mathexp(-.5*e*e);for(var l=126;1<=l;l--)e=_Mathsqrt(-2*_Mathlog(o/e+_Mathexp(-.5*e*e))),r[l+1]=_Mathfloor(e*t/n),n=e,a[l]=_Mathexp(-.5*e*e),s[l]=e/t})(),this.next=function(){let i=n(),u=127&i,l=_Mathabs(i)<r[u]?i*s[u]:function(t,e){let i,u,l=3.442619855899,h=1/l;for(;;){if(i=t*s[e],0===e){for(i=-_Mathlog(o())*h,u=-_Mathlog(o());u+u<i*i;)i=-_Mathlog(o())*h,u=-_Mathlog(o());return 0<t?l+i:-l-i}if(a[e]+o()*(a[e-1]-a[e])<_Mathexp(-.5*i*i))return i;if(e=127&(t=n()),_Mathabs(t)<r[e])return t*s[e]}}(i,u);return l*e+t}};var stats=new Statistics(data={});function humanise(t){var e=[[Math.floor(t/31536e3),"years"],[Math.floor(t%31536e3/86400),"days"]];t<=15768e4&&e.push([Math.floor(t%31536e3%86400/3600),"hours"],[Math.floor(t%31536e3%86400%3600/60),"minutes"],[t%31536e3%86400%3600%60,"seconds"]);for(var i="",s=0,a=e.length;s<a;s++)0!==e[s][0]&&(i+=" "+e[s][0]+" "+(1===e[s][0]?e[s][1].substr(0,e[s][1].length-1):e[s][1]));return i.trim()}function login_wen(t,e,i,s){if(t<=0||e>10**i||e<1||s>1||s<0)return[-1,-1];for(var a=0,r=0,n=0;a<s;){for(r+=r<=15768e4?300:86400;t*r<1;)r+=3600;if(r>=31536e6)return[-2,-2];a=1-stats.binomialProbabilityMass(0,Math.round(t*r),e/10**i),n+=1}return 1==n?[-3,-3]:[a=Math.round(100*a),r]}function update(){console.log("updating...");var t=login_wen(document.getElementById("guesses").value/document.getElementById("period").value,document.getElementById("grace").value,document.getElementById("digits").value,document.getElementById("prob").value/100);if(-1==t[0])document.getElementById("result").innerText="invalid input";else if(-2==t[0])document.getElementById("result").innerText="more than 1000 years";else if(-3==t[0])document.getElementById("result").innerText="less than 5 minutes";else{var e=humanise(t[1]);document.getElementById("result").innerText=e}}async function checkElementExists(t,e=1/0){let i=Date.now();return new Promise((s=>{const a=setInterval((()=>{document.querySelector(t)?(clearInterval(a),s(!0)):Date.now()-i>=1e3*e&&(clearInterval(a),s(!1))}),100)}))}checkElementExists("#result",10).then((t=>{t&&(document.querySelectorAll(".totp").forEach((t=>{t.oninput=update})),update())}));
        </script>
    </body>
</html>
